(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{171:function(t,e,n){var a=n(180);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("27c4935e",a,!0,{sourceMap:!1})},172:function(t,e,n){var a=n(182);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("1a228718",a,!0,{sourceMap:!1})},173:function(t,e,n){var a=n(185);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("fc1f2200",a,!0,{sourceMap:!1})},174:function(t,e,n){var a=n(187);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("91cfd680",a,!0,{sourceMap:!1})},175:function(t,e,n){var a=n(191);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("57ae22c0",a,!0,{sourceMap:!1})},176:function(t,e,n){var a=n(193);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("759df730",a,!0,{sourceMap:!1})},177:function(t,e,n){var a=n(195);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("bdbc5140",a,!0,{sourceMap:!1})},178:function(t,e,n){var a=n(197);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("d4be674c",a,!0,{sourceMap:!1})},179:function(t,e,n){"use strict";var a=n(171);n.n(a).a},180:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"",""])},181:function(t,e,n){"use strict";var a=n(172);n.n(a).a},182:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"\n.rightMenu{margin-left:10px\n}\n.penTypeColor{font-weight:700;background-color:#39f;color:#fff\n}\n.penTypeBlack{font-weight:700;background-color:#333a41;color:#fff\n}",""])},183:function(t,e,n){var a,i,s;i=[],void 0===(s="function"==typeof(a=function(){return function t(e,n,a){var i,s,o=window,r="application/octet-stream",c=a||r,l=e,u=!n&&!a&&l,h=document.createElement("a"),v=function(t){return String(t)},d=o.Blob||o.MozBlob||o.WebKitBlob||v,p=n||"download";if(d=d.call?d.bind(o):Blob,"true"===String(this)&&(c=(l=[l,c])[0],l=l[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],h.href=u,-1!==h.href.indexOf(u))){var f=new XMLHttpRequest;return f.open("GET",u,!0),f.responseType="blob",f.onload=function(e){t(e.target.response,p,r)},setTimeout(function(){f.send()},0),f}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&d!==v))return navigator.msSaveBlob?navigator.msSaveBlob(w(l),p):C(l);l=w(l),c=l.type||r}else if(/([\x80-\xff])/.test(l)){for(var m=0,g=new Uint8Array(l.length),b=g.length;m<b;++m)g[m]=l.charCodeAt(m);l=new d([g],{type:c})}function w(t){for(var e=t.split(/[:;,]/),n=e[1],a="base64"==e[2]?atob:decodeURIComponent,i=a(e.pop()),s=i.length,o=0,r=new Uint8Array(s);o<s;++o)r[o]=i.charCodeAt(o);return new d([r],{type:n})}function C(t,e){if("download"in h)return h.href=t,h.setAttribute("download",p),h.className="download-js-link",h.innerHTML="downloading...",h.style.display="none",document.body.appendChild(h),setTimeout(function(){h.click(),document.body.removeChild(h),!0===e&&setTimeout(function(){o.URL.revokeObjectURL(h.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,r)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,r)),n.src=t,setTimeout(function(){document.body.removeChild(n)},333)}if(i=l instanceof d?l:new d([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(i,p);if(o.URL)C(o.URL.createObjectURL(i),!0);else{if("string"==typeof i||i.constructor===v)try{return C("data:"+c+";base64,"+o.btoa(i))}catch(t){return C("data:"+c+","+encodeURIComponent(i))}(s=new FileReader).onload=function(t){C(this.result)},s.readAsDataURL(i)}return!0}})?a.apply(e,i):a)||(t.exports=s)},184:function(t,e,n){"use strict";var a=n(173);n.n(a).a},185:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"\n.previewImage{width:100%;margin-bottom:10px;border:1px solid\n}\n.cursorPointer{cursor:pointer\n}\n.tweetModalOpenButton{margin-top:10px\n}\n.saveText{margin-left:10px\n}\n.modal-lg{max-width:900px\n}",""])},186:function(t,e,n){"use strict";var a=n(174);n.n(a).a},187:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"\n.notice{font-size:10pt;margin-top:20px;margin-bottom:50px\n}",""])},188:function(t,e,n){var a=n(8);a(a.P,"Array",{fill:n(189)}),n(58)("fill")},189:function(t,e,n){"use strict";var a=n(43),i=n(89),s=n(42);t.exports=function(t){for(var e=a(this),n=s(e.length),o=arguments.length,r=i(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,l=void 0===c?n:i(c,n);l>r;)e[r++]=t;return e}},190:function(t,e,n){"use strict";var a=n(175);n.n(a).a},191:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"\n.float-right{float:right\n}\n.strokeCount{font-size:10pt\n}",""])},192:function(t,e,n){"use strict";var a=n(176);n.n(a).a},193:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"\n.bottomMenuWrapper{height:30px;vertical-align:middle\n}\n.brushSizeInput{width:130px\n}\n.brushSizeInput,.brushSizeNum{line-height:30px;vertical-align:middle\n}\n.brushSizeNum{display:inline-block;width:25px;text-align:center\n}\n#brushSize{display:inline-block;line-height:30px;vertical-align:middle;width:24px;height:24px;border:1px solid;margin:0;padding:0\n}\n.toolText{font-size:10pt\n}\n.pressureInput{line-height:30px;width:130px;vertical-align:middle\n}",""])},194:function(t,e,n){"use strict";var a=n(177);n.n(a).a},195:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"\n[v-cloak]{display:none\n}\n.float-left{float:left\n}\n.clear{clear:both\n}\n#canvas{border:1px solid\n}\n.times{color:#bbb\n}\n.transparentOnHover:hover{opacity:.5\n}\n.mainContent{width:1000px;margin-top:10px;margin-left:10px\n}",""])},196:function(t,e,n){"use strict";var a=n(178);n.n(a).a},197:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"",""])},198:function(t,e,n){"use strict";n.r(e);var a={props:["navClick"]},i=(n(179),n(17)),s=Object(i.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar navbar-expand navbar-dark bg-dark"},[n("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),n("div",{staticClass:"navbar-collapse"},[n("ul",{staticClass:"navbar-nav mr-auto"},[n("b-dropdown",{staticClass:"m-md-2",attrs:{id:"ddown1",text:"操作"}},[n("b-dropdown-item",{on:{click:function(e){t.navClick("canvas-size-default")}}},[t._v("\n            キャンバスサイズ変更(デフォルト)\n          ")]),t._v(" "),n("b-dropdown-item",{on:{click:function(e){t.navClick("canvas-size-vertical")}}},[t._v("\n            キャンバスサイズ変更(縦長)\n          ")]),t._v(" "),n("b-dropdown-item",{on:{click:function(e){t.navClick("canvas-all-clear")}}},[t._v("\n            全消し\n          ")])],1)],1)])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"navbar-header"},[e("span",{staticClass:"navbar-brand"},[this._v("すみぺいんとぴーだぶりゅーえー")])])}],!1,null,null,null);s.options.__file="HeaderNav.vue";var o=s.exports,r={props:["penType","changePenType"],computed:{penTypeString:function(){switch(this.penType){case"color":return"色";case"black":return"黒"}return""},penTypeButtonClass:function(){var t={penTypeColor:!1,penTypeBlack:!1};switch(this.penType){case"color":t.penTypeColor=!0;break;case"black":t.penTypeBlack=!0}return t}}},c=(n(181),Object(i.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"float-left rightMenu"},[e("button",{staticClass:"btn cursorPointer",class:this.penTypeButtonClass,on:{click:this.changePenType}},[e("i",{staticClass:"fa fa-pencil-alt",attrs:{"aria-hidden":"true"}}),this._v(" "),e("span",[this._v(this._s(this.penTypeString))])])])},[],!1,null,null,null));c.options.__file="PenType.vue";var l=c.exports,u=n(183),h=n.n(u),v={props:["canvas"],data:function(){return{imageName:"",imageBase64:null}},computed:{saveImageButtonDisable:function(){return this.imageName.length<=0||0!=/^.*[(\\|\/|:|\*|?|\"|<|>|\|)].*$/.test(this.imageName)}},methods:{showModalButtonClick:function(){this.imageBase64=this.canvas.toDataURL(),this.$refs.previewModalRef.show()},saveImageButtonClick:function(){var t=/\.png$/i.test(this.imageName)?this.imageName:this.imageName+".png";h()(this.imageBase64,t,"image/png")},previewCloseButtonClick:function(){this.$refs.previewModalRef.hide()}}},d=(n(184),Object(i.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"previewModalRef",attrs:{id:"modal-center",centered:"","ok-only":"","no-close-on-backdrop":"",title:"保存ダイアログ",size:"lg sub"},on:{ok:function(e){t.previewCloseButtonClick()}}},[n("img",{ref:"previewImage",staticClass:"previewImage",attrs:{src:t.imageBase64}}),t._v(" "),n("div",{staticClass:"saveText"},[t._v("\n      ↑ の画像を右クリックまたはタップ長押しで保存して下さい\n      ")]),t._v(" "),n("b-form-input",{attrs:{type:"text",placeholder:"画像ファイル名"},model:{value:t.imageName,callback:function(e){t.imageName=e},expression:"imageName"}}),t._v(" "),n("b-button",{attrs:{disabled:t.saveImageButtonDisable},on:{click:t.saveImageButtonClick}},[t._v("\n        PNG形式で保存\n      ")])],1),t._v(" "),n("div",[n("button",{staticClass:"btn btn-outline-info cursorPointer tweetModalOpenButton",attrs:{id:"show-modal"},on:{click:function(e){t.showModalButtonClick()}}},[t._v("\n      画像を保存\n    ")])])],1)},[],!1,null,null,null));d.options.__file="PicturePreview.vue";var p=d.exports,f={},m=(n(186),Object(i.a)(f,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"notice"},[t._v("\n  ※ 推奨環境: iPad Pro 12.9 インチ"),n("br"),t._v("\n  ※ 筆圧は Apple Pencil のみ動作を確認しています"),n("br"),t._v("\n  ※ 機能追加のご要望・不具合報告などは開発者("),n("a",{attrs:{href:"https://twitter.com/rururu3",target:"_blank"}},[t._v("@rururu3")]),t._v(")までお寄せ下さい"),n("br"),t._v("\n  ※ 本アプリケーションを利用したことによる一切の損害について、開発者は責任を持ちません"),n("br"),t._v("\n  ※ オリジナルのすみぺいんとは"),n("a",{attrs:{href:"https://twitter.com/smison",target:"_blank"}},[t._v("@smison")]),t._v("様が作成です"),n("br")])}],!1,null,null,null));m.options.__file="Notice.vue";var g=m.exports,b=(n(188),{props:["strokeCount"]}),w=(n(190),Object(i.a)(b,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"float-right"},[e("div",{staticClass:"strokeCount"},[this._v("\n    ストローク: "+this._s(this.strokeCount)+"\n  ")])])},[],!1,null,null,null));w.options.__file="StrokeCount.vue";var C={props:["strokeCount","brushSize","pressureNum"],components:{StrokeCount:w.exports},data:function(){return{brushSizeViewCanvas:null,brushSizeViewCanvasContext:null}},watch:{brushSize:function(t,e){this.drawBrushSize(t)}},methods:{drawBrushSize:function(t){this.brushSizeViewCanvasContext.fillStyle="rgb(255, 255, 255)",this.brushSizeViewCanvasContext.fillRect(0,0,this.brushSizeViewCanvas.width,this.brushSizeViewCanvas.height),this.brushSizeViewCanvasContext.beginPath(),this.brushSizeViewCanvasContext.fillStyle="rgb(0, 0, 0)",this.brushSizeViewCanvasContext.arc(this.brushSizeViewCanvas.width/2,this.brushSizeViewCanvas.height/2,t/2,0,2*Math.PI,!1),this.brushSizeViewCanvasContext.fill()}},mounted:function(){this.brushSizeViewCanvas=this.$refs.brushSizeViewCanvas,this.brushSizeViewCanvas.width=24,this.brushSizeViewCanvas.height=24,this.brushSizeViewCanvasContext=this.brushSizeViewCanvas.getContext("2d"),this.drawBrushSize(this.brushSize)}},x=(n(192),Object(i.a)(C,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottomMenuWrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.brushSize,expression:"brushSize"}],staticClass:"brushSizeInput",attrs:{type:"range",min:"1",max:"30",step:"1"},domProps:{value:t.brushSize},on:{__r:function(e){t.brushSize=e.target.value}}}),t._v(" "),n("span",{staticClass:"brushSizeNum"},[t._v(t._s(t.brushSize))]),t._v(" "),n("canvas",{ref:"brushSizeViewCanvas",attrs:{id:"brushSize"}}),t._v("\n  | "),n("span",{staticClass:"toolText"},[t._v("筆圧影響")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pressureNum,expression:"pressureNum"}],staticClass:"pressureInput",attrs:{type:"range",min:"0",max:"9",step:"1"},domProps:{value:t.pressureNum},on:{__r:function(e){t.pressureNum=e.target.value}}}),t._v(" "),n("span",{staticClass:"pressureNum"},[t._v(t._s(t.pressureNum))]),t._v(" "),n("stroke-count",{attrs:{strokeCount:t.strokeCount}})],1)},[],!1,null,null,null));x.options.__file="BrushSize.vue";var _={components:{HeaderNav:o,PenType:l,PicturePreview:p,Notice:g,BrushSize:x.exports},data:function(){return{penType:"black",isDrawing:!1,strokeCount:0,brushSize:2,pressureNum:3,rgba:{r:0,g:0,b:0,a:1},fromCoordinate:{x:0,y:0},imageBase64:null,canvasMode:null,canvas:null,context:null,previewImage:null}},methods:{changePenType:function(){"color"!==this.penType?this.penType="color":this.penType="black"},dropDownButtonClick:function(t){this.canvasMode=t,this.canvasMode,this.$refs.canvasConfirmModalRef.show()},okModalButtonClick:function(){switch(this.canvasMode){case"canvas-size-default":this.setCanvasSize(800,600),this.clearCanvas();break;case"canvas-size-vertical":this.setCanvasSize(500,900),this.clearCanvas();break;case"canvas-all-clear":this.clearCanvas()}this.$refs.canvasConfirmModalRef.hide()},loadCanvas:function(){var t=this,e=window.localStorage.getItem("canvasWidth"),n=window.localStorage.getItem("canvasHeight");e&&(this.canvas.width=e),n&&(this.canvas.height=n);var a=window.localStorage.getItem("canvas");if(a){var i=new Image;i.src=a,i.onload=function(){t.context.drawImage(i,0,0)}}else this.context.fillStyle="rgb(255, 255, 255)",this.context.fillRect(0,0,this.canvas.width,this.canvas.height);var s=window.localStorage.getItem("strokeCount");s&&(this.strokeCount=parseInt(s))},saveCanvas:function(){window.localStorage.setItem("canvas",this.canvas.toDataURL()),window.localStorage.setItem("strokeCount",this.strokeCount),window.localStorage.setItem("canvasWidth",this.canvas.width),window.localStorage.setItem("canvasHeight",this.canvas.height)},setCanvasSize:function(t,e){this.canvas.width=t,this.canvas.height=e,window.localStorage.setItem("canvasWidth",t),window.localStorage.setItem("canvasHeight",e)},clearCanvas:function(){this.context.fillStyle="rgb(255, 255, 255)",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.strokeCount=0,this.saveCanvas()},drawStart:function(t){t.preventDefault(),this.isDrawing=!0;var e=this.getIsTouch(t),n=this.getCoordinate(t,e);this.fromCoordinate.x=n.x,this.fromCoordinate.y=n.y,this.rgba=this.getRGBA(this.penType);var a=this.getLineWidth(t,e,this.brushSize,this.pressureNum);this.drawLine(e,this.context,this.fromCoordinate,n,this.rgba,a),this.strokeCount++},drawEnd:function(){this.isDrawing=!1,this.saveCanvas()},drawMove:function(t){if(this.isDrawing){var e=this.getIsTouch(t),n=this.getCoordinate(t,e),a=this.getLineWidth(t,e,this.brushSize,this.pressureNum);this.drawLine(e,this.context,this.fromCoordinate,n,this.rgba,a),this.fromCoordinate.x=n.x,this.fromCoordinate.y=n.y}},drawLine:function(t,e,n,a,i,s){e.strokeStyle="rgba("+i.r+","+i.g+","+i.b+","+i.a+")",e.lineWidth=s,e.lineJoin="round",e.lineCap="round",e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(a.x,a.y),e.stroke(),e.closePath()},getLineWidth:function(t,e,n,a){return e&&0!==a&&(n=n*t.touches[0].force*a),n},getIsTouch:function(t){var e=!0;return void 0===t.touches&&(e=!1),e},getRGBA:function(t){var e={r:0,g:0,b:0,a:1};return"color"===t&&(e.r=Math.floor(255*Math.random()),e.g=Math.floor(255*Math.random()),e.b=Math.floor(255*Math.random())),e},getCoordinate:function(t,e){var n=0,a=0,i=t.target.getBoundingClientRect();return e?(n=t.touches[0].clientX-i.left,a=t.touches[0].clientY-i.top):(n=t.clientX-i.left,a=t.clientY-i.top),{x:n,y:a}}},mounted:function(){this.$nextTick(function(){var t=this;this.canvas=this.$refs.canvas,this.canvas.width=800,this.canvas.height=600,this.context=this.canvas.getContext("2d"),this.canvas.addEventListener("mousedown",function(e){t.drawStart(e)}),this.canvas.addEventListener("mousemove",function(e){t.drawMove(e)}),this.canvas.addEventListener("mouseup",function(e){t.drawEnd(e)}),this.canvas.addEventListener("touchstart",function(e){t.drawStart(e)}),this.canvas.addEventListener("touchmove",function(e){t.drawMove(e)}),this.canvas.addEventListener("touchend",function(e){t.drawEnd(e)}),this.previewImage=this.$refs.previewImage,this.rgba=this.getRGBA(this.penType),this.loadCanvas()})}},S=(n(194),Object(i.a)(_,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("b-modal",{ref:"canvasConfirmModalRef",attrs:{title:"確認"},on:{ok:t.okModalButtonClick}},[n("div",{staticClass:"d-block text-center"},[n("h3",[t._v("キャンバスサイズを変更します(全消しされます)。よろしいですか？")])])]),t._v(" "),n("header-nav",{attrs:{navClick:t.dropDownButtonClick}}),t._v(" "),n("div",{staticClass:"mainContent"},[n("div",{staticClass:"float-left"},[n("div",[n("canvas",{ref:"canvas",attrs:{id:"canvas"}})]),t._v(" "),n("brush-size",{attrs:{strokeCount:t.strokeCount,brushSize:t.brushSize,pressureNum:t.pressureNum}}),t._v(" "),n("picture-preview",{attrs:{canvas:t.canvas}}),t._v(" "),n("notice")],1),t._v(" "),n("pen-type",{attrs:{penType:t.penType,changePenType:t.changePenType}})],1)],1)},[],!1,null,null,null));S.options.__file="MainCanvas.vue";var k={components:{MainCanvas:S.exports}},y=(n(196),Object(i.a)(k,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("main-canvas")],1)},[],!1,null,null,null));y.options.__file="index.vue";e.default=y.exports}}]);